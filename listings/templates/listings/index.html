<!DOCTYPE html>
<html>
    <head>
        <title>VN Real Estate Empire</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    </head>
    <body class="bg-light">
    
        <nav class="navbar navbar-dark bg-dark mb-4">
            <div class="container">
                <a class="navbar-brand" href="#">üè¢ VN PropTech</a>
            </div>
        </nav>
    
        <div class="container">
            <h1 class="mb-4 text-center">Premium Listings</h1>
            <div class="row mb-5">
                <div class="col-md-8 mx-auto">
                    <div class="card shadow-sm mb-5 border-0">
                        <div class="card-body bg-primary bg-opacity-10 rounded">
                            <form method="GET" action="{% url 'listings_index' %}">
                                <div class="row g-2">
                                    
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" name="q" class="form-control" id="keywords" placeholder="Keywords" value="{{ values.q }}">
                                            <label for="keywords">Keywords (Pool, Penthouse...)</label>
                                        </div>
                                    </div>
                    
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <select name="district" class="form-select" id="district" onchange="this.form.submit()">
    
                                                <option selected="true" disabled="disabled">Choose District</option>
                                                <option value="District 1" {% if values.district == 'District 1' %}selected{% endif %}>District 1 (Q.1)</option>
                                                <option value="District 2" {% if values.district == 'District 2' %}selected{% endif %}>District 2 (Thao Dien)</option>
                                                <option value="District 3" {% if values.district == 'District 3' %}selected{% endif %}>District 3</option>
                                                <option value="District 4" {% if values.district == 'District 4' %}selected{% endif %}>District 4</option>
                                                <option value="Binh Thanh" {% if values.district == 'Binh Thanh' %}selected{% endif %}>Binh Thanh</option>
                                            </select>
                                            <label for="district">Location</label>
                                        </div>
                                    </div>
                    
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <select name="price" class="form-select" id="price" onchange="this.form.submit()">
                                                <option selected="true" disabled="disabled">Max Price (Any)</option>
                                                <option value="2" {% if values.price == '2' %}selected{% endif %}>Under 2 Billion</option>
                                                <option value="5" {% if values.price == '5' %}selected{% endif %}>Under 5 Billion</option>
                                                <option value="10" {% if values.price == '10' %}selected{% endif %}>Under 10 Billion</option>
                                                <option value="20" {% if values.price == '20' %}selected{% endif %}>Under 20 Billion</option>
                                                <option value="50" {% if values.price == '50' %}selected{% endif %}>Under 50 Billion</option>
                                            </select>
                                            <label for="price">Budget</label>
                                        </div>
                                    </div>
                    
                                    <div class="col-md-2 d-grid gap-2">
                                        <button class="btn btn-primary fw-bold" type="submit">Search</button>
                                        
                                        {% if values.q or values.district or values.price %}
                                            <a href="{% url 'listings_index' %}" class="btn btn-outline-secondary btn-sm">
                                                ‚úñ Clear
                                            </a>
                                        {% endif %}
                                    </div>
                    
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                {% if properties %}
                {% for prop in properties %}
                <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
                    
                    <div class="card shadow-sm h-100">
                        {% if prop.main_photo %}
                            <img src="{{ prop.main_photo.url }}" class="card-img-top" alt="{{ prop.title }}" style="height: 200px; object-fit: cover;">
                        {% else %}
                            <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 200px;">
                                <span>No Image Available</span>
                            </div>
                        {% endif %}
                    
                        <div class="card-body">
                            <h5 class="card-title">
                                <a href="{% url 'property_detail' prop.pk %}" class="text-decoration-none text-primary stretched-link">
                                    {{ prop.title }}
                                </a>
                            </h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{ prop.location_district }}</h6>
                            <p class="card-text">
                                <strong>Price:</strong> {{ prop.price_in_billions }} Billion<br>
                                <strong>Area:</strong> {{ prop.area_sqm }} m¬≤
                            </p>
        
                            <p class="card-text">
                                <strong>Alley Width:</strong> {{ prop.alley_width_meters }}m
                            </p>
                            
                            {% if prop.alley_width_meters < 2.5 %}
                                <div class="alert alert-danger p-1 text-center">
                                    üö´ <strong>WARNING:</strong> Car Cannot Enter!
                                    <br><small>Hard to resell.</small>
                                </div>
                            {% else %}
                                <div class="alert alert-success p-1 text-center">
                                    üöó Car Access OK
                                </div>
                            {% endif %}
                            
                            <div class="mt-3">
                                {% if prop.is_legal_clear %}
                                    <span class="badge bg-success">Red Book Ready</span>
                                {% else %}
                                    <span class="badge bg-warning text-dark">Processing Legal</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
        
                </div> {% endfor %}
                {% else %}
                    <div class="alert alert-info">No properties found. The market is quiet.</div>
                {% endif %}
            </div>
        </div>
        <footer class="bg-dark text-light py-4 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h5>VN PropTech</h5>
                        <p class="small text-muted">
                            Empowering Vietnam's Real Estate market with Data & AI.
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-uppercase text-warning">Legal Disclaimer</h6>
                        <p class="small text-white-50" style="font-size: 0.8rem;">
                            The information provided here, including AI-generated content, is for reference only. 
                            VN PropTech does not guarantee the accuracy or legal standing of any property. 
                            <strong>Buyers must verify legal documents (S·ªï ƒê·ªè) independently.</strong> 
                            We accept no liability for financial loss.
                        </p>
                    </div>
                </div>
                <hr class="border-secondary">
                <div class="text-center small text-muted">
                    &copy; 2025 VN PropTech. All Rights Reserved.
                </div>
            </div>
        </footer>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script>
          AOS.init();
        </script>
    </body>
</html>